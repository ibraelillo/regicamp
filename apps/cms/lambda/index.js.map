{"version":3,"sources":["index.ts"],"sourcesContent":["import strapiFactory from '@strapi/strapi'\nimport serverless from '@vendia/serverless-express'\n\nstrapiFactory({\n    appDir: process.env.LAMBDA_TASK_ROOT,\n    serveAdminPanel: false,\n    distDir: 'build',\n    autoReload: Boolean(process.env.IS_LOCAL)\n})\n\nlet  strapi = global.strapi\n\nlet serve: ReturnType<typeof serverless>;\n\n\n\n/**\n * \n * @param evt \n * @param ctx \n * @returns \n */\nexport const handler = async (evt: any, ctx: any, cb: any) => {\n\n    if(!strapi.isLoaded){\n        await strapi.load()\n        await strapi.postListen()\n        await strapi.server.mount()\n    }\n    \n\n    if(!serve)  {\n        serve = serverless({ app: strapi.app })\n    }\n\n    return serve(evt, ctx, cb)\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA0B;AAC1B,gCAAuB;AAAA,IAEvB,cAAAA,SAAc;AAAA,EACV,QAAQ,QAAQ,IAAI;AAAA,EACpB,iBAAiB;AAAA,EACjB,SAAS;AAAA,EACT,YAAY,QAAQ,QAAQ,IAAI,QAAQ;AAC5C,CAAC;AAED,IAAK,SAAS,OAAO;AAErB,IAAI;AAUG,IAAM,UAAU,OAAO,KAAU,KAAU,OAAY;AAE1D,MAAG,CAAC,OAAO,UAAS;AAChB,UAAM,OAAO,KAAK;AAClB,UAAM,OAAO,WAAW;AACxB,UAAM,OAAO,OAAO,MAAM;AAAA,EAC9B;AAGA,MAAG,CAAC,OAAQ;AACR,gBAAQ,0BAAAC,SAAW,EAAE,KAAK,OAAO,IAAI,CAAC;AAAA,EAC1C;AAEA,SAAO,MAAM,KAAK,KAAK,EAAE;AAC7B;","names":["strapiFactory","serverless"]}